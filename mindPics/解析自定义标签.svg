<svg xmlns:ed="http://www.edrawsoft.cn/xml/2017/SVGExtensions/" ed:hSpacing="30" xmlns:ev="http://www.w3.org/2001/xml-events" width="980" height="557" id="page100" xmlns:xlink="http://www.w3.org/1999/xlink" ed:name="Page-1" viewBox="0 0 980 557" xmlns="http://www.w3.org/2000/svg" ed:vSpacing="30"><style type="text/css"><![CDATA[
g[ed\:togtopicid],g[ed\:hyperlink],g[ed\:comment],g[ed\:note] {cursor:pointer;}
g[id] {-moz-user-select: none;-ms-user-select: none;user-select: none;}
svg text::selection,svg tspan::selection{background-color: #4285f4;color: #ffffff;fill: #ffffff;}
.st2 {fill:#303030;font-family:微软雅黑;font-size:11pt}
.st1 {fill:#303030;font-family:微软雅黑;font-size:14pt}
.st3 {fill:#303030;font-family:微软雅黑;font-size:9pt}
]]></style><defs><linearGradient x2="0%" id="lg1" x1="0%" y2="100%" y1="0%"><stop stop-color="#ffffff" offset="0"/><stop stop-color="#f0f5f0" offset="0.25"/><stop stop-color="#e1ebe1" offset="0.75"/><stop stop-color="#c8d7c8" offset="1"/></linearGradient></defs><rect width="980" height="557" x="0" fill="#ffffff" y="0"/><path transform="matrix(1,0,0,1,247,106)" stroke="#96cdde" ed:parentid="101" stroke-linejoin="round" id="103" stroke-linecap="round" d="M0,-30.3L0,30.3" fill="none" ed:tosuperid="102"/><path transform="matrix(1,0,0,1,247,269)" stroke="#96cdde" ed:parentid="101" stroke-linejoin="round" id="105" stroke-linecap="round" d="M0,-96.9L0,96.9" fill="none" ed:tosuperid="104"/><path transform="matrix(1,0,0,1,340,336)" stroke="#96cdde" ed:parentid="104" stroke-linejoin="round" id="113" stroke-linecap="round" d="M3.7,48.1L3.7,-42.1C3.7,-45.4,6.4,-48.1,9.7,-48.1L13.5,-48.1" fill="none" ed:tosuperid="112"/><path transform="matrix(1,0,0,1,340,318)" stroke="#96cdde" ed:parentid="104" stroke-linejoin="round" id="115" stroke-linecap="round" d="M-13.5,66.1L3.7,66.1L3.7,-60.1C3.7,-63.4,6.4,-66.1,9.7,-66.1L13.5,-66.1" fill="none" ed:tosuperid="114"/><path transform="matrix(1,0,0,1,340,350)" stroke="#96cdde" ed:parentid="104" stroke-linejoin="round" id="119" stroke-linecap="round" d="M3.7,34.4L3.7,-28.4C3.7,-31.7,6.4,-34.4,9.7,-34.4L13.5,-34.4" fill="none" ed:tosuperid="118"/><path transform="matrix(1,0,0,1,340,368)" stroke="#96cdde" ed:parentid="104" stroke-linejoin="round" id="121" stroke-linecap="round" d="M3.7,16.4L3.7,-10.4C3.7,-13.7,6.4,-16.4,9.7,-16.4L13.5,-16.4" fill="none" ed:tosuperid="120"/><path transform="matrix(1,0,0,1,340,386)" stroke="#96cdde" ed:parentid="104" stroke-linejoin="round" id="123" stroke-linecap="round" d="M3.7,-1.6C3.7,0.2,6.4,1.6,9.7,1.6L13.5,1.6" fill="none" ed:tosuperid="122"/><path transform="matrix(1,0,0,1,340,413)" stroke="#96cdde" ed:parentid="104" stroke-linejoin="round" id="127" stroke-linecap="round" d="M3.7,-29.1L3.7,23.1C3.7,26.4,6.4,29.1,9.7,29.1L13.5,29.1" fill="none" ed:tosuperid="126"/><path transform="matrix(1,0,0,1,340,400)" stroke="#96cdde" ed:parentid="104" stroke-linejoin="round" id="129" stroke-linecap="round" d="M3.7,-15.4L3.7,9.4C3.7,12.7,6.4,15.4,9.7,15.4L13.5,15.4" fill="none" ed:tosuperid="128"/><path transform="matrix(1,0,0,1,340,427)" stroke="#96cdde" ed:parentid="104" stroke-linejoin="round" id="131" stroke-linecap="round" d="M3.7,-42.9L3.7,36.9C3.7,40.2,6.4,42.9,9.7,42.9L13.5,42.9" fill="none" ed:tosuperid="130"/><path transform="matrix(1,0,0,1,340,441)" stroke="#96cdde" ed:parentid="104" stroke-linejoin="round" id="133" stroke-linecap="round" d="M3.7,-56.6L3.7,50.6C3.7,53.9,6.4,56.6,9.7,56.6L13.5,56.6" fill="none" ed:tosuperid="132"/><path transform="matrix(1,0,0,1,340,455)" stroke="#96cdde" ed:parentid="104" stroke-linejoin="round" id="135" stroke-linecap="round" d="M3.7,-70.4L3.7,64.4C3.7,67.7,6.4,70.4,9.7,70.4L13.5,70.4" fill="none" ed:tosuperid="134"/><path transform="matrix(1,0,0,1,340,127)" stroke="#96cdde" ed:parentid="102" stroke-linejoin="round" id="137" stroke-linecap="round" d="M-13.5,27.5L3.7,27.5L3.7,-21.5C3.7,-24.8,6.4,-27.5,9.7,-27.5L13.5,-27.5" fill="none" ed:tosuperid="136"/><path transform="matrix(1,0,0,1,340,141)" stroke="#96cdde" ed:parentid="102" stroke-linejoin="round" id="139" stroke-linecap="round" d="M3.7,13.8L3.7,-7.8C3.7,-11.1,6.4,-13.8,9.7,-13.8L13.5,-13.8" fill="none" ed:tosuperid="138"/><path transform="matrix(1,0,0,1,340,155)" stroke="#96cdde" ed:parentid="102" stroke-linejoin="round" id="141" stroke-linecap="round" d="M3.7,0C3.7,0,6.4,0,9.7,0L13.5,0" fill="none" ed:tosuperid="140"/><path transform="matrix(1,0,0,1,340,168)" stroke="#96cdde" ed:parentid="102" stroke-linejoin="round" id="149" stroke-linecap="round" d="M3.7,-13.8L3.7,7.8C3.7,11.1,6.4,13.8,9.7,13.8L13.5,13.8" fill="none" ed:tosuperid="148"/><path transform="matrix(1,0,0,1,340,182)" stroke="#96cdde" ed:parentid="102" stroke-linejoin="round" id="151" stroke-linecap="round" d="M3.7,-27.5L3.7,21.5C3.7,24.8,6.4,27.5,9.7,27.5L13.5,27.5" fill="none" ed:tosuperid="150"/><g ed:height="55" transform="matrix(1,0,0,1,21,21)" ed:topictype="mainidea" id="101" ed:layout="map" ed:width="451"><path stroke="#96cdde" stroke-linejoin="round" fill="#96cdde" d="M0,0L451,0L451,55L0,55L0,0z"/><text class="st1"><tspan style="white-space:pre" x="20" y="33.5">BeanDefinitionParserDelegate解析自定义标签</tspan></text></g><g ed:height="36" transform="matrix(1,0,0,1,167,137)" ed:parentid="101" id="102" ed:layout="rightmap" ed:width="160"><path stroke="#96cdde" stroke-linejoin="round" fill="#eff6f9" d="M0,0L160,0L160,36L0,36L0,0z"/><text class="st2"><tspan style="white-space:pre" x="19" y="22.5">1.自定义标签流程</tspan></text></g><g ed:height="36" transform="matrix(1,0,0,1,167,366)" ed:parentid="101" id="104" ed:layout="rightmap" ed:width="160"><path stroke="#96cdde" stroke-linejoin="round" fill="#eff6f9" d="M0,0L160,0L160,36L0,36L0,0z"/><text class="st2"><tspan style="white-space:pre" x="19" y="22.5">2.解析自定义标签</tspan></text></g><g ed:height="21" transform="matrix(1,0,0,1,354,278)" ed:parentid="104" id="112" ed:layout="rightmap" ed:width="282"><text class="st3"><tspan style="white-space:pre" x="10" y="14.4">2.2.利用第三方包函数获取自定义标签的命名空间</tspan></text></g><g ed:height="38" transform="matrix(1,0,0,1,354,233)" ed:parentid="104" id="114" ed:layout="rightmap" ed:width="428"><text class="st3"><tspan style="white-space:pre" x="10" y="14.5">2.1.创建标签命名空间处理解析器DefaultNamespaceHandlerResolver,</tspan><tspan style="white-space:pre" x="10" y="31.5">其中包含handlerMappings&lt;NameSpace, HandlerResolver></tspan></text><g ed:note="&lt;body style=&quot; font-family:'����'; font-size:9pt; font-weight:400; font-style:normal;&quot;>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;>创建&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>XmlReaderContext时会调用&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#4078f2;&quot;>getNamespaceHandlerResolver&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>方法，其中会调用&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>createDefaultNamespaceHandlerResolver&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>方法创建命名空间处理解析器。&lt;/span>&lt;/p>&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a0a1a7;&quot;>&lt;br />&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a0a1a7;&quot;>   /**&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#000000;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a0a1a7;&quot;>     * 创建XmlReaderContext对象用于registerBeanDefinitions&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#000000;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a0a1a7;&quot;>     * Create the {&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a626a4;&quot;>@link&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a0a1a7;&quot;> XmlReaderContext} to pass over to the document reader.&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#000000;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a0a1a7;&quot;>     */&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>    &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>public&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;> XmlReaderContext &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#4078f2;&quot;>createReaderContext&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#000000;&quot;>(Resource resource)&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;> &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>{&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>        &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>return&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;> &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>new&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;> XmlReaderContext(resource, &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>this&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>.problemReporter, &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>this&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>.eventListener,&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>                &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>this&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>.sourceExtractor, &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>this&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>, getNamespaceHandlerResolver());&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>    }&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>    &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a0a1a7;&quot;>/**&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#000000;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a0a1a7;&quot;>     * Lazily create a default NamespaceHandlerResolver, if not set before.&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#000000;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a0a1a7;&quot;>     * &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a626a4;&quot;>@see&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a0a1a7;&quot;> #createDefaultNamespaceHandlerResolver()&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#000000;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a0a1a7;&quot;>     */&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>    &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>public&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;> NamespaceHandlerResolver &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#4078f2;&quot;>getNamespaceHandlerResolver&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#000000;&quot;>()&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;> &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>{&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>        &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>if&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;> (&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>this&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>.namespaceHandlerResolver == &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>null&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>) {&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>            &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>this&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>.namespaceHandlerResolver = createDefaultNamespaceHandlerResolver();&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>        }&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>        &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>return&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;> &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>this&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>.namespaceHandlerResolver;&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>    }&lt;/span>&lt;/p>&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>    &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a0a1a7;&quot;>/**&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#000000;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a0a1a7;&quot;>     * Create the default implementation of {&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a626a4;&quot;>@link&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a0a1a7;&quot;> NamespaceHandlerResolver} used if none is specified.&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#000000;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a0a1a7;&quot;>     * Default implementation returns an instance of {&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a626a4;&quot;>@link&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a0a1a7;&quot;> DefaultNamespaceHandlerResolver}.&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#000000;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a0a1a7;&quot;>     */&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>    &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>protected&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;> NamespaceHandlerResolver &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#4078f2;&quot;>createDefaultNamespaceHandlerResolver&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#000000;&quot;>()&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;> &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>{&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>        ClassLoader cl = (getResourceLoader() != &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>null&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;> ? getResourceLoader().getClassLoader() : getBeanClassLoader());&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>        &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>return&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;> &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>new&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;> DefaultNamespaceHandlerResolver(cl);&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>    }&lt;/span>&lt;/p>&lt;/body>"><use transform="translate(402,12)" xlink:href="#note"/></g></g><symbol id="note"><image width="16" height="16" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyOTkwNTNiYS1iMTE3LWZiNDQtOTgwYy1mYjkwYzFiNzJlMWUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QkYyRkU5OTU5Nzg0MTFFNzlFMjZFQTA0OUExMTI5NjAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QkYyRkU5OTQ5Nzg0MTFFNzlFMjZFQTA0OUExMTI5NjAiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MmY3M2I2ZDQtOWU4NC04ZDQ4LTk5NzItZDE3ODAwZjMyZDYzIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6YzQ3Yzk0OWQtMGQ1Ny0xMWU3LTkzMmUtYzliNjJlYTc1ZTM1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+K193vQAAAZpJREFUeNqkU0svA1EYPXe01UxV0npUSZTUBgtCk6Z2NmJj7R9YsKrHyiMRfoAtWxt/gWAhIkGaSEQqwdBWQrRlKp161PT6xijaejU9yZ17c+ee893z3e9jnHOUAoP2mZpbKkpltP+SEWDzzOoCGuanh/5FTqwunyvbFpdynwzZPIBQTOSHyA0eD9Xmpwhfp9H2YSGLncDRj2RvQxjcaEO61o7U8UlLmr0s0HZfjoCvqy2PxgD+AkTXwO73IKZOkRmYAI9eR+TtjfGCG2iJyYGqAPFNQN4FUhJgqoYYWzyz2O/61Iwi/WnBVx8ESwbJfJjINXQbFTMrne6xXkmy+g0oEOjpbn+b048JsNgqWCJAkS8A8g7BCN7op79rlAsTWLlQKKCzozDKW0Ay8BlZE2gaJpJTP6MVX0YvHSHfwvPVAXneJ3IIKHfQLiXRNUJr57evkyPgaW2EQUlBfagDyuw0RKBlEjDX/V7KWURjcZjlW9jsbvCKdjCHl05U/t0LWZitVRA7BiGIYnHN9N5Q/6/pL/XCSm3nVwEGAAA2iwis0BevAAAAAElFTkSuQmCC"/></symbol><g ed:height="21" transform="matrix(1,0,0,1,354,305)" ed:parentid="104" id="118" ed:layout="rightmap" ed:width="580"><text class="st3"><tspan style="white-space:pre" x="10" y="14.4">2.3.根据自定义标签命名空间从DefaultNamespaceHandlerResolver实例化对应的NameSpaceHandler</tspan></text></g><g ed:height="38" transform="matrix(1,0,0,1,354,333)" ed:parentid="104" id="120" ed:layout="rightmap" ed:width="605"><text class="st3"><tspan style="white-space:pre" x="10" y="14.5">2.4.调用自定义NameSpaceHandler的init()方法，注册自定义BeanDefinitionParser解析器，</tspan><tspan style="white-space:pre" x="10" y="31.5">注册的解析器将会添加至NamespaceHandlerSupport的parsers&lt;String, BeanDefinitionParser>中</tspan></text><g ed:note="&lt;body style=&quot; font-family:'����'; font-size:9pt; font-weight:400; font-style:normal;&quot;>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>调用NamespaceHandlerSupport类中的&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#4078f2;&quot;>registerBeanDefinitionParser()&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>方法注册&lt;/span>&lt;/p>&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;>&lt;br />&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>private&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;> &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>final&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;> Map&amp;lt;String, BeanDefinitionParser&amp;gt; parsers = &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>new&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;> HashMap&amp;lt;&amp;gt;();&lt;/span>&lt;/p>&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>&lt;br />&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>protected&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;> &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>final&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;> &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>void&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;> &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#4078f2;&quot;>registerBeanDefinitionParser&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#000000;&quot;>(String elementName, BeanDefinitionParser parser)&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;> &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>{&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>        &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>this&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>.parsers.put(elementName, parser);&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>}&lt;/span>&lt;/p>&lt;/body>"><use transform="translate(579,12)" xlink:href="#note"/></g></g><g ed:height="21" transform="matrix(1,0,0,1,354,377)" ed:parentid="104" id="122" ed:layout="rightmap" ed:width="542"><text class="st3"><tspan style="white-space:pre" x="10" y="14.4">2.5.根据标签名称从parsers&lt;String, BeanDefinitionParser>中寻找合适解析器来解析自定义标签</tspan></text></g><g ed:height="21" transform="matrix(1,0,0,1,354,432)" ed:parentid="104" id="126" ed:layout="rightmap" ed:width="573"><text class="st3"><tspan style="white-space:pre" x="10" y="14.4">2.7.利用找到的自定义的BeanDefinitionParser解析器获取bean的类型信息以及解析自定义标签内容</tspan></text><g ed:note="&lt;body style=&quot; font-family:'����'; font-size:9pt; font-weight:400; font-style:normal;&quot;>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a0a1a7;&quot;>// 获取自定义标签中的class，此时会调用自定义解析器如UserBeanDefinitionParser中的getBeanClass方法&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>Class&amp;lt;?&amp;gt; beanClass = getBeanClass(element);&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>if&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;> (beanClass != &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>null&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>) {&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>    builder.getRawBeanDefinition().setBeanClass(beanClass);&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>}&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>else&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;> {&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>    &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a0a1a7;&quot;>// 如果子类没有重写getBeanClass，则检查是否重写了getBeanClassName&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>    String beanClassName = getBeanClassName(element);&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>    &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>if&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;> (beanClassName != &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>null&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>) {&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>          builder.getRawBeanDefinition().setBeanClassName(beanClassName);&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>    }&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>}&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>builder.getRawBeanDefinition().setSource(parserContext.extractSource(element));&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>BeanDefinition containingBd = parserContext.getContainingBeanDefinition();&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>if&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;> (containingBd != &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>null&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>) {&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>    &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a0a1a7;&quot;>// Inner bean definition must receive same scope as containing bean.&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>    &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a0a1a7;&quot;>// 若存在父类则使用父类的scope属性&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>    builder.setScope(containingBd.getScope());&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>}&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>if&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;> (parserContext.isDefaultLazyInit()) {&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>    &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a0a1a7;&quot;>// Default-lazy-init applies to custom bean definitions as well.&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>    &lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a0a1a7;&quot;>// 配置延迟加载&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>    builder.setLazyInit(&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#a626a4;&quot;>true&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>);&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>}&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; font-style:italic; color:#a0a1a7;&quot;>// 调用子类重写的doParse方法进行解析&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42;&quot;>&lt;br />&lt;/span>&lt;span style=&quot; font-family:'Consolas,Inconsolata,Courier,monospace'; font-size:11px; color:#383a42; background-color:#fafafa;&quot;>doParse(element, parserContext, builder);&lt;/span>&lt;/p>&lt;/body>"><use transform="translate(547,4)" xlink:href="#note"/></g></g><g ed:height="21" transform="matrix(1,0,0,1,354,405)" ed:parentid="104" id="128" ed:layout="rightmap" ed:width="323"><text class="st3"><tspan style="white-space:pre" x="10" y="14.4">2.6.创建BeanDefinitionBuilder用于构建BeanDefinition</tspan></text></g><g ed:height="21" transform="matrix(1,0,0,1,354,460)" ed:parentid="104" id="130" ed:layout="rightmap" ed:width="402"><text class="st3"><tspan style="white-space:pre" x="10" y="14.4">2.8.将自定义解析器解析的结果以及其他一些属性设置给BeanDefinition</tspan></text></g><g ed:height="21" transform="matrix(1,0,0,1,354,487)" ed:parentid="104" id="132" ed:layout="rightmap" ed:width="550"><path fill="#ec6901" d="M0,0L550,0L550,21L0,21L0,0z"/><text class="st3"><tspan style="white-space:pre" x="10" y="14.4">2.9.将AbstractBeanDefinition转换为BeanDefinitionHolder，并进行注册，与默认标签的过程一致</tspan></text></g><g ed:height="21" transform="matrix(1,0,0,1,354,515)" ed:parentid="104" id="134" ed:layout="rightmap" ed:width="419"><path fill="#30c9f7" d="M0,0L419,0L419,21L0,21L0,0z"/><text class="st3"><tspan style="white-space:pre" x="10" y="14.4">2.10.beanDefinition注册完后通知ReaderEventListener监听器做相应处理</tspan></text></g><g ed:height="21" transform="matrix(1,0,0,1,354,89)" ed:parentid="102" id="136" ed:layout="rightmap" ed:width="263"><text class="st3"><tspan style="white-space:pre" x="10" y="14.4">1.1.创建一个需要扩展的组件（bean实体类）</tspan></text></g><g ed:height="21" transform="matrix(1,0,0,1,354,117)" ed:parentid="102" id="138" ed:layout="rightmap" ed:width="486"><text class="st3"><tspan style="white-space:pre" x="10" y="14.4">1.2.定义XSD文件描述组件内容，定义了Namespace和1.4中的自定义Handler类的映射</tspan></text></g><g ed:height="21" transform="matrix(1,0,0,1,354,144)" ed:parentid="102" id="140" ed:layout="rightmap" ed:width="463"><text class="st3"><tspan style="white-space:pre" x="10" y="14.4">1.3.创建自定义标签解析类，实现BeanDefinitionParser接口，用于自定义标签内容</tspan></text></g><g ed:height="21" transform="matrix(1,0,0,1,354,172)" ed:parentid="102" id="148" ed:layout="rightmap" ed:width="538"><text class="st3"><tspan style="white-space:pre" x="10" y="14.4">1.4.创建Handler类，继承自NamespaceHandlerSupport类，目的是注册自定义标签解析类实例</tspan></text></g><g ed:height="21" transform="matrix(1,0,0,1,354,199)" ed:parentid="102" id="150" ed:layout="rightmap" ed:width="548"><text class="st3"><tspan style="white-space:pre" x="10" y="14.4">1.5.编写spring.handlers和spring.schemas文件，用于指定本地 XSD文件位置以及Handler类路径</tspan></text></g><symbol id="plus"><path fill="url(#lg1)" d="M11,6C11,8.8,8.8,11,6,11C3.2,11,1,8.8,1,6C1,3.2,3.2,1,6,1C8.8,1,11,3.2,11,6z"/><path stroke-width="0.7" stroke="#46a000" fill="none" d="M11,6C11,8.8,8.8,11,6,11C3.2,11,1,8.8,1,6C1,3.2,3.2,1,6,1C8.8,1,11,3.2,11,6zM3,6L9,6M6,3L6,9"/></symbol><symbol id="minus"><path fill="url(#lg1)" d="M11,6C11,8.8,8.8,11,6,11C3.2,11,1,8.8,1,6C1,3.2,3.2,1,6,1C8.8,1,11,3.2,11,6z"/><path stroke-width="0.7" stroke="#46a000" fill="none" d="M11,6C11,8.8,8.8,11,6,11C3.2,11,1,8.8,1,6C1,3.2,3.2,1,6,1C8.8,1,11,3.2,11,6zM3,6L9,6"/></symbol><g transform="translate(241,77)" ed:togtopicid="101"><use xlink:href="#minus"/></g><g transform="translate(328,149)" ed:togtopicid="102"><use xlink:href="#minus"/></g><g transform="translate(328,378)" ed:togtopicid="104"><use xlink:href="#minus"/></g></svg>